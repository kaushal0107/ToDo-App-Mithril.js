<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mithril tutorial</title>
  </head>
  <body class="root">
    <script>
      var root = document.body;

      // your code goes here!
      // m.render(root, [
      //   m("main", [
      //     m("h1", { class: "title" }, "My first app"),
      //     m("button", "A button"),
      //   ]),
      // ]);
      //components
      // var count = 0; // added a variable

      // var Hello = {
      //   view: function () {
      //     return m("main", [
      //       m("h1", { class: "title" }, "My first app"),
      //       // changed the next line
      //       m(
      //         "button",
      //         {
      //           onclick: function () {
      //             count++;
      //           },
      //         },
      //         count + " clicks"
      //       ),
      //     ]);
      //   },
      // };
      //Routing

      //XHR
      var root = document.body;
      var count = 0;

      var increment = function () {
        m.request({
          method: "PUT",
          url: "//rem-rest-api.herokuapp.com/api/tutorial/1",
          body: { count: count + 1 },
          withCredentials: true,
        }).then(function (data) {
          count = parseInt(data.count);
        });
      };

      var Hello = {
        view: function () {
          return m("main", [
            m(
              "h1",
              {
                class: "title",
              },
              "My first mithril app"
            ),
            m(
              "button",
              {
                onclick: increment,
              },
              count + " clicks"
            ),
          ]);
        },
      };

      m.mount(root, Hello);
    </script>
    <script src="bin/app.js"></script>
  </body>
</html>
